<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>SocketChat - Real-Time Chat</title>
		<script src="/socket.io/socket.io.js"></script>
		<script src="/app.js" defer></script>
		<link
			rel="stylesheet"
			href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css"
		/>
		<link rel="stylesheet" href="/styles.css" />
	</head>
	<body>
		<!-- Main header with title and global dark mode toggle -->
		<header id="mainHeader">
			<h1>SocketChat <i class="fa-solid fa-comments"></i></h1>
		</header>
		<!-- Global dark mode toggle button (positioned fixed en la esquina superior derecha) -->
		<button id="themeToggle" class="iconBtn" title="Toggle Dark Mode">
			<i class="fa-solid fa-moon"></i>
		</button>

		<div class="main-container">
			<div id="login-container">
				<form id="loginForm">
					<label for="usernameInput" class="sr-only">Username</label>
					<input
						type="text"
						id="usernameInput"
						placeholder="Enter username"
						autofocus
						required
					/>
					<button type="submit" class="submitBtn">Join Chat</button>
				</form>
			</div>

			<div id="chat-container" class="hidden">
				<aside id="sidebar">
					<div class="room-management">
						<h3><i class="fa-solid fa-door-open"></i> Rooms</h3>
						<div class="new-room">
							<input
								type="text"
								id="newRoomInput"
								placeholder="New room name"
							/>
							<button id="createRoomBtn" class="iconBtn">
								<i class="fa-solid fa-plus"></i>
							</button>
						</div>
					</div>
					<ul id="roomList"></ul>
					<div class="user-management">
						<h3><i class="fa-solid fa-user"></i> Online Users</h3>
						<ul id="userListConnected"></ul>
					</div>
				</aside>

				<section id="chatArea">
					<header id="chatHeader">
						<div class="header-info">
							<h2 id="currentRoomName">Sala</h2>
							<span id="connectionStatus" class="connected">Connected</span>
						</div>
						<button id="leaveRoomBtn" class="submitBtn">
							<i class="fa-solid fa-arrow-right-from-bracket"></i> Leave Room
						</button>
					</header>

					<ul id="messages">
						<!-- Ejemplo de mensajes -->
						<div class="message self">
							<header class="message-header">
								<span class="username">Antonio</span>
								<time class="timestamp">12:25</time>
							</header>
							<p class="content">hola</p>
						</div>

						<div class="message">
							<header class="message-header">
								<span class="username">Pepe</span>
								<time class="timestamp">12:26</time>
							</header>
							<p class="content">hola</p>
						</div>

						<div class="message">
							<header class="message-header">
								<span class="username">Pepe</span>
								<time class="timestamp">12:26</time>
							</header>
							<p class="content">hola</p>
						</div>

						<div class="message self">
							<header class="message-header">
								<span class="username">Antonio</span>
								<time class="timestamp">12:26</time>
							</header>
							<p class="content">hola</p>
						</div>
					</ul>

					<div id="typingIndicator"></div>

					<form id="messageForm">
						<div class="input-container">
							<input
								type="text"
								id="messageInput"
								placeholder="Type your message..."
								maxlength="500"
							/>
							<div id="charCounter">500/500</div>
						</div>
						<button type="submit" class="submitBtn">Send</button>
					</form>
				</section>
			</div>

			<div id="notification-container"></div>
			<div aria-live="polite" class="sr-only" id="a11y-notifications"></div>
		</div>
	</body>
</html>
